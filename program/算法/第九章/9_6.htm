<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=gb_2312-80">
<META NAME="Generator" CONTENT="Microsoft Word 97">
<TITLE>第 2 章  线性表</TITLE>
</HEAD>
<BODY>

<B><FONT SIZE=3><P ALIGN="JUSTIFY">6. </FONT><FONT FACE="宋体" LANG="ZH-CN" SIZE=3>堆排序算法</P>
</B><P ALIGN="JUSTIFY">&#9;</FONT><B><FONT SIZE=3>typedef</B>  SqList  HeapType;</P>
<P ALIGN="JUSTIFY">&#9;<B>void</B>  HeapAdjust ( HeapType  <B>&amp;</B>H,  <B>int</B>  s,  <B>int</B>  m )  </FONT><B><FONT FACE="宋体" LANG="ZH-CN" SIZE=3>{</P>
</B><P ALIGN="JUSTIFY">&#9;</FONT><FONT SIZE=3>// </FONT><FONT FACE="宋体" LANG="ZH-CN" SIZE=3>已知</FONT><FONT SIZE=3> <I>H.</I>r[<I>s</I> . . <I>m</I>] </FONT><FONT FACE="宋体" LANG="ZH-CN" SIZE=3>中记录的关键字除</FONT><FONT SIZE=3> <I>H.</I>r[<I>s</I>].<I>key</I> </FONT><FONT FACE="宋体" LANG="ZH-CN" SIZE=3>之外均满足堆的以，</P>
<P ALIGN="JUSTIFY">&#9;</FONT><FONT SIZE=3>// </FONT><FONT FACE="宋体" LANG="ZH-CN" SIZE=3>此函数调整</FONT><FONT SIZE=3> <I>H.</I>r[<I>s</I>] </FONT><FONT FACE="宋体" LANG="ZH-CN" SIZE=3>的关键字，使</FONT><FONT SIZE=3> <I>H.</I>r[<I>s</I> . . <I>m</I>] </FONT><FONT FACE="宋体" LANG="ZH-CN" SIZE=3>成为一个堆。</P>
<P ALIGN="JUSTIFY">&#9;</FONT><FONT SIZE=3>  temp = H.r[s];</P>
<P ALIGN="JUSTIFY">&#9;  <B>for</B> ( j = 2*s;  j &lt;=m;  j *=2 )  </FONT><B><FONT FACE="宋体" LANG="ZH-CN" SIZE=3>{&#9;&#9;&#9;&#9;</B></FONT><FONT SIZE=3>// </FONT><FONT FACE="宋体" LANG="ZH-CN" SIZE=3>沿着</FONT><FONT SIZE=3> <I>key</I> </FONT><FONT FACE="宋体" LANG="ZH-CN" SIZE=3>较大的孩子结点向下筛选</P>
<P ALIGN="JUSTIFY">&#9;&#9;</FONT><B><FONT SIZE=3>if</B> ( j &lt;m <B>&amp;&amp;</B> ( H.r[j].key &lt; H.r[j+1].key ) )  </P><DIR>

<P ALIGN="JUSTIFY">  ++j;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;// <I>j</I> </FONT><FONT FACE="宋体" LANG="ZH-CN" SIZE=3>为</FONT><FONT SIZE=3> <I>key</I> </FONT><FONT FACE="宋体" LANG="ZH-CN" SIZE=3>较大的记录的下标</P></DIR>

<P ALIGN="JUSTIFY">&#9;&#9;</FONT><B><FONT SIZE=3>if</B> ( <B>!</B> ( temp.key &lt; H.r[j].key ) )</P><DIR>

<P ALIGN="JUSTIFY">  <B>break</B>;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;// <I>temp</I> </FONT><FONT FACE="宋体" LANG="ZH-CN" SIZE=3>应该插入在位置</FONT><FONT SIZE=3> <I>s</I> </FONT><FONT FACE="宋体" LANG="ZH-CN" SIZE=3>上</P></DIR>

<P ALIGN="JUSTIFY">&#9;&#9;</FONT><FONT SIZE=3>H.r[s] = H.r[j];  s = j;</P>
<P ALIGN="JUSTIFY">&#9;  </FONT><B><FONT FACE="宋体" LANG="ZH-CN" SIZE=3>}</B></FONT><FONT SIZE=3> // for </FONT><FONT FACE="宋体" LANG="ZH-CN" SIZE=3>结束</P>
<P ALIGN="JUSTIFY">&#9;</FONT><FONT SIZE=3>  H.r[s] = temp;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;// </FONT><FONT FACE="宋体" LANG="ZH-CN" SIZE=3>插入</P>
<P ALIGN="JUSTIFY">&#9;<B>}</B></FONT><FONT SIZE=3> // HeapAdjust</P>
<P ALIGN="JUSTIFY"></P>
<P ALIGN="JUSTIFY">&#9;<B>void</B>  HeapSort ( HeapType  <B>&amp;</B>H )  </FONT><B><FONT FACE="宋体" LANG="ZH-CN" SIZE=3>{</P>
</B><P ALIGN="JUSTIFY">&#9;</FONT><FONT SIZE=3>// </FONT><FONT FACE="宋体" LANG="ZH-CN" SIZE=3>对顺序表</FONT><FONT SIZE=3> <I>H</I> </FONT><FONT FACE="宋体" LANG="ZH-CN" SIZE=3>进行堆排序</P>
<P ALIGN="JUSTIFY">&#9;</FONT><FONT SIZE=3>  <B>for</B> ( i = H.length/2;  i &gt; 0;  --i )</P>
<P ALIGN="JUSTIFY">&#9;&#9;HeapAdjust ( H, i, H.length );&#9;&#9;&#9;&#9;&#9;// </FONT><FONT FACE="宋体" LANG="ZH-CN" SIZE=3>把</FONT><FONT SIZE=3> <I>H.</I>r[1 . . <I>H.length</I>] </FONT><FONT FACE="宋体" LANG="ZH-CN" SIZE=3>构造成堆</P>
<P ALIGN="JUSTIFY">&#9;</FONT><FONT SIZE=3>  <B>for</B> ( i = H.length;  i &gt; 1;  --i )  </FONT><B><FONT FACE="宋体" LANG="ZH-CN" SIZE=3>{</P>
</B><P ALIGN="JUSTIFY">&#9;&#9;</FONT><FONT SIZE=3>temp = H.r[1];&#9;&#9;H.r[1] = H.r[i];&#9;&#9;H.r[i] = temp;</P><DIR>

<P ALIGN="JUSTIFY">// </FONT><FONT FACE="宋体" LANG="ZH-CN" SIZE=3>将堆顶记录和当前未经排序的子序列</FONT><FONT SIZE=3> <I>H.</I>r[1 . . <I>i</I>] </FONT><FONT FACE="宋体" LANG="ZH-CN" SIZE=3>中的最后一个记录相互交换</P></DIR>

<P ALIGN="JUSTIFY">&#9;&#9;</FONT><FONT SIZE=3>HeapAdjust ( H, 1, i-1 );&#9;&#9;&#9;&#9;&#9;&#9;// </FONT><FONT FACE="宋体" LANG="ZH-CN" SIZE=3>将</FONT><FONT SIZE=3> <I>H.</I>r[1 . . <I>i</I>-1] </FONT><FONT FACE="宋体" LANG="ZH-CN" SIZE=3>重新调整为堆</P>
<P ALIGN="JUSTIFY">&#9;</FONT><FONT SIZE=3>  </FONT><B><FONT FACE="宋体" LANG="ZH-CN" SIZE=3>}</B></FONT><FONT SIZE=3> // for </FONT><FONT FACE="宋体" LANG="ZH-CN" SIZE=3>结束</P>
<P ALIGN="JUSTIFY">&#9;<B>}</B></FONT><FONT SIZE=3> HeapSort</P></FONT></BODY>
</HTML>
