<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=gb_2312-80">
<META NAME="Generator" CONTENT="Microsoft Word 97">
<TITLE>第 2 章  线性表</TITLE>
</HEAD>
<BODY>

<B><FONT SIZE=3><P ALIGN="JUSTIFY">8. </FONT><FONT FACE="宋体" LANG="ZH-CN" SIZE=3>求堆分配存储的子串算法</P>
</FONT><FONT SIZE=3><P ALIGN="JUSTIFY">    Status</B>  SubString ( HString  <B>&amp;</B>Sub,  HString  S,  <B>int</B>  pos,  <B>int</B>  len )  </FONT><B><FONT FACE="宋体" LANG="ZH-CN" SIZE=3>{</P>
</B></FONT><FONT SIZE=3><P ALIGN="JUSTIFY">    // </FONT><FONT FACE="宋体" LANG="ZH-CN" SIZE=3>用</FONT><FONT SIZE=3> <I>Sub</I> </FONT><FONT FACE="宋体" LANG="ZH-CN" SIZE=3>返回串</FONT><FONT SIZE=3> <I>S</I> </FONT><FONT FACE="宋体" LANG="ZH-CN" SIZE=3>的第</FONT><FONT SIZE=3> <I>pos</I> </FONT><FONT FACE="宋体" LANG="ZH-CN" SIZE=3>个字符起长度为</FONT><FONT SIZE=3> <I>len</I> </FONT><FONT FACE="宋体" LANG="ZH-CN" SIZE=3>的子串。</P>
</FONT><B><FONT SIZE=3><P ALIGN="JUSTIFY">  if</B> ( pos &lt; 1 <B>||</B> pos &gt; S.length <B>||</B> len &lt; 0 <B>||</B> len &gt; S.lengthCpos+1 )  <B>return</B> ERROR;</P>
<P ALIGN="JUSTIFY">    </FONT><FONT FACE="宋体" LANG="ZH-CN" SIZE=3>&#9;</FONT><FONT SIZE=3>  <B>if</B> ( Sub.ch )  <B>free</B> ( Sub.ch )&#9;&#9;&#9;     </FONT><FONT FACE="宋体" LANG="ZH-CN" SIZE=3>&#9;</FONT><FONT SIZE=3>// </FONT><FONT FACE="宋体" LANG="ZH-CN" SIZE=3>释放原有空间</P>
</FONT><FONT SIZE=3><P ALIGN="JUSTIFY">    </FONT><FONT FACE="宋体" LANG="ZH-CN" SIZE=3>&#9;</FONT><FONT SIZE=3>  <B>if</B> ( <B>!</B> len )  </FONT><B><FONT FACE="宋体" LANG="ZH-CN" SIZE=3>{</FONT><FONT SIZE=3> </B>Sub.ch = NULL;  Sub.length = 0; </FONT><B><FONT FACE="宋体" LANG="ZH-CN" SIZE=3>}&#9;</B></FONT><FONT SIZE=3>// </FONT><FONT FACE="宋体" LANG="ZH-CN" SIZE=3>若</FONT><FONT SIZE=3> <I>len</I> </FONT><FONT FACE="宋体" LANG="ZH-CN" SIZE=3>为</FONT><FONT SIZE=3> 0</FONT><FONT FACE="宋体" LANG="ZH-CN" SIZE=3>，则置空串</FONT><FONT SIZE=3> <I>Sub</P>
</I><P ALIGN="JUSTIFY">    </FONT><FONT FACE="宋体" LANG="ZH-CN" SIZE=3>&#9;</FONT><FONT SIZE=3>  <B>else  {</B></FONT><FONT FACE="宋体" LANG="ZH-CN" SIZE=3>&#9;&#9;</FONT><FONT SIZE=3>     </FONT><FONT FACE="宋体" LANG="ZH-CN" SIZE=3>&#9;&#9;&#9;&#9;&#9;&#9;&#9;</FONT><FONT SIZE=3>// </FONT><FONT FACE="宋体" LANG="ZH-CN" SIZE=3>若</FONT><FONT SIZE=3> <I>len</I> </FONT><FONT FACE="宋体" LANG="ZH-CN" SIZE=3>非</FONT><FONT SIZE=3> 0</FONT><FONT FACE="宋体" LANG="ZH-CN" SIZE=3>，则求子串</FONT><FONT SIZE=3> <I>Sub</P>
</I><P ALIGN="JUSTIFY">    </FONT><FONT FACE="宋体" LANG="ZH-CN" SIZE=3>&#9;&#9;</FONT><B><FONT SIZE=3>if</B> ( <B>!</B> Sub.ch = ( char * ) <B>malloc</B> ( len * <B>sizeof</B> ( char ) ) )  <B>exit</B> (OVERFLOW);</P>
<P ALIGN="JUSTIFY">    </FONT><FONT FACE="宋体" LANG="ZH-CN" SIZE=3>&#9;&#9;</FONT><FONT SIZE=3>Sub.ch[ 0 .. len-1] = S[ pos-1 .. pos+len-2 ];  Sub.length = len;</P>
<P ALIGN="JUSTIFY">  </FONT><B><FONT FACE="宋体" LANG="ZH-CN" SIZE=3>}</B></FONT><FONT SIZE=3> // else </FONT><FONT FACE="宋体" LANG="ZH-CN" SIZE=3>结束</P>
</FONT><FONT SIZE=3><P ALIGN="JUSTIFY">    </FONT><FONT FACE="宋体" LANG="ZH-CN" SIZE=3>&#9;</FONT><FONT SIZE=3>  <B>return</B> OK;</P>
</FONT><B><FONT FACE="宋体" LANG="ZH-CN" SIZE=3><P ALIGN="JUSTIFY">}</B></FONT><FONT SIZE=3> // SubString</P></FONT></BODY>
</HTML>
