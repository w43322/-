<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=gb_2312-80">
<META NAME="Generator" CONTENT="Microsoft Word 97">
<TITLE>第 2 章  线性表</TITLE>
</HEAD>
<BODY>

<B><FONT SIZE=3><P ALIGN="JUSTIFY">9. </FONT><FONT FACE="宋体" LANG="ZH-CN" SIZE=3>堆分配存储的串插入算法</P>
</FONT><FONT SIZE=3><P ALIGN="JUSTIFY">    Status</B>  StrInsert ( HString  <B>&amp;</B>S,  <B>int</B>  pos,  HString  T )  </FONT><B><FONT FACE="宋体" LANG="ZH-CN" SIZE=3>{</P>
</B></FONT><FONT SIZE=3><P ALIGN="JUSTIFY">    // 1</FONT><FONT FACE="宋体" LANG="ZH-CN" SIZE=3>≤</FONT><I><FONT SIZE=3>pos</I></FONT><FONT FACE="宋体" LANG="ZH-CN" SIZE=3>≤</FONT><FONT SIZE=3>StrLength (S)+1</FONT><FONT FACE="宋体" LANG="ZH-CN" SIZE=3>。在串</FONT><FONT SIZE=3> <I>S</I> </FONT><FONT FACE="宋体" LANG="ZH-CN" SIZE=3>的第</FONT><FONT SIZE=3> <I>pos</I> </FONT><FONT FACE="宋体" LANG="ZH-CN" SIZE=3>个字符之前插入串</FONT><FONT SIZE=3> <I>T</I> </FONT><FONT FACE="宋体" LANG="ZH-CN" SIZE=3>。</P>
</FONT><B><FONT SIZE=3><P ALIGN="JUSTIFY">  if</B> ( pos &lt; 1 <B>||</B> pos &gt; S.length+1 )  <B>return</B>  ERROR;</P>
<P ALIGN="JUSTIFY">    </FONT><FONT FACE="宋体" LANG="ZH-CN" SIZE=3>&#9;</FONT><FONT SIZE=3>  <B>if</B> ( T.length )  </FONT><B><FONT FACE="宋体" LANG="ZH-CN" SIZE=3>{&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;</B></FONT><FONT SIZE=3>// </FONT><FONT FACE="宋体" LANG="ZH-CN" SIZE=3>如果</FONT><FONT SIZE=3> <I>T</I> </FONT><FONT FACE="宋体" LANG="ZH-CN" SIZE=3>非空，则重新分配空间，插入</FONT><FONT SIZE=3> <I>T</P>
</I><P ALIGN="JUSTIFY">    </FONT><FONT FACE="宋体" LANG="ZH-CN" SIZE=3>&#9;</FONT><FONT SIZE=3>    </FONT><FONT FACE="宋体" LANG="ZH-CN" SIZE=3>&#9;</FONT><B><FONT SIZE=3>if</B> ( <B>!</B> ( S.ch = (char *) <B>realloc</B> ( S.ch , ( S.length + T.length ) * <B>sizeof</B> (char ) ) ) )  <B>exit</B> ( OVERFLOW );</P><DIR>

<B><P ALIGN="JUSTIFY">for</B> ( i = S.length-1;  i &gt;= pos-1;  --i )</P>
<P ALIGN="JUSTIFY">  S.ch[i+T.length] = S.ch[i];</FONT><FONT FACE="宋体" LANG="ZH-CN" SIZE=3>&#9;&#9;&#9;&#9;&#9;</FONT><FONT SIZE=3>// </FONT><FONT FACE="宋体" LANG="ZH-CN" SIZE=3>为插入</FONT><FONT SIZE=3> <I>T</I> </FONT><FONT FACE="宋体" LANG="ZH-CN" SIZE=3>而腾出位置</P></DIR>

</FONT><FONT SIZE=3><P ALIGN="JUSTIFY">    S.ch[pos-1..pos+T.length-2 ] = T.ch[0..T.length-1];// </FONT><FONT FACE="宋体" LANG="ZH-CN" SIZE=3>插入</FONT><FONT SIZE=3> <I>T</P>
</I><P ALIGN="JUSTIFY">    </FONT><FONT FACE="宋体" LANG="ZH-CN" SIZE=3>&#9;</FONT><FONT SIZE=3>    S.length + = T.length;&#9;&#9;&#9;     </FONT><FONT FACE="宋体" LANG="ZH-CN" SIZE=3>&#9;&#9;</FONT><FONT SIZE=3>// </FONT><FONT FACE="宋体" LANG="ZH-CN" SIZE=3>更新串</FONT><FONT SIZE=3> <I>S</I> </FONT><FONT FACE="宋体" LANG="ZH-CN" SIZE=3>的长度</P>
</FONT><B><FONT SIZE=3><P ALIGN="JUSTIFY">  </FONT><FONT FACE="宋体" LANG="ZH-CN" SIZE=3>}</B></FONT><FONT SIZE=3> // if </FONT><FONT FACE="宋体" LANG="ZH-CN" SIZE=3>结束</P>
</FONT><FONT SIZE=3><P ALIGN="JUSTIFY">    </FONT><FONT FACE="宋体" LANG="ZH-CN" SIZE=3>&#9;</FONT><FONT SIZE=3>  <B>return</B> OK;</P>
</FONT><B><FONT FACE="宋体" LANG="ZH-CN" SIZE=3><P ALIGN="JUSTIFY">}</B></FONT><FONT SIZE=3> // StrInsert</P></FONT></BODY>
</HTML>
